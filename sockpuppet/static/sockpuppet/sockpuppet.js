!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=function(){function e(e,t){this.eventTarget=e,this.eventName=t,this.unorderedBindings=new Set}return e.prototype.connect=function(){this.eventTarget.addEventListener(this.eventName,this,!1)},e.prototype.disconnect=function(){this.eventTarget.removeEventListener(this.eventName,this,!1)},e.prototype.bindingConnected=function(e){this.unorderedBindings.add(e)},e.prototype.bindingDisconnected=function(e){this.unorderedBindings.delete(e)},e.prototype.handleEvent=function(e){for(var t=function(e){if("immediatePropagationStopped"in e)return e;var t=e.stopImmediatePropagation;return Object.assign(e,{immediatePropagationStopped:!1,stopImmediatePropagation:function(){this.immediatePropagationStopped=!0,t.call(this)}})}(e),n=0,r=this.bindings;n<r.length;n++){var o=r[n];if(t.immediatePropagationStopped)break;o.handleEvent(t)}},Object.defineProperty(e.prototype,"bindings",{get:function(){return Array.from(this.unorderedBindings).sort((function(e,t){var n=e.index,r=t.index;return n<r?-1:n>r?1:0}))},enumerable:!0,configurable:!0}),e}();var o=function(){function e(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}return e.prototype.start=function(){this.started||(this.started=!0,this.eventListeners.forEach((function(e){return e.connect()})))},e.prototype.stop=function(){this.started&&(this.started=!1,this.eventListeners.forEach((function(e){return e.disconnect()})))},Object.defineProperty(e.prototype,"eventListeners",{get:function(){return Array.from(this.eventListenerMaps.values()).reduce((function(e,t){return e.concat(Array.from(t.values()))}),[])},enumerable:!0,configurable:!0}),e.prototype.bindingConnected=function(e){this.fetchEventListenerForBinding(e).bindingConnected(e)},e.prototype.bindingDisconnected=function(e){this.fetchEventListenerForBinding(e).bindingDisconnected(e)},e.prototype.handleError=function(e,t,n){void 0===n&&(n={}),this.application.handleError(e,"Error "+t,n)},e.prototype.fetchEventListenerForBinding=function(e){var t=e.eventTarget,n=e.eventName;return this.fetchEventListener(t,n)},e.prototype.fetchEventListener=function(e,t){var n=this.fetchEventListenerMapForEventTarget(e),r=n.get(t);return r||(r=this.createEventListener(e,t),n.set(t,r)),r},e.prototype.createEventListener=function(e,t){var n=new r(e,t);return this.started&&n.connect(),n},e.prototype.fetchEventListenerMapForEventTarget=function(e){var t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t},e}(),i=/^((.+?)(@(window|document))?->)?(.+?)(#(.+))?$/;var s=function(){function e(e,t,n){this.element=e,this.index=t,this.eventTarget=n.eventTarget||e,this.eventName=n.eventName||function(e){var t=e.tagName.toLowerCase();if(t in a)return a[t](e)}(e)||l("missing event name"),this.identifier=n.identifier||l("missing identifier"),this.methodName=n.methodName||l("missing method name")}return e.forToken=function(e){return new this(e.element,e.index,(n=e.content,r=n.trim().match(i)||[],{eventTarget:(t=r[4],"window"==t?window:"document"==t?document:void 0),eventName:r[2],identifier:r[5],methodName:r[7]}));var t,n,r},e.prototype.toString=function(){var e=this.eventTargetName?"@"+this.eventTargetName:"";return""+this.eventName+e+"->"+this.identifier+"#"+this.methodName},Object.defineProperty(e.prototype,"eventTargetName",{get:function(){return(e=this.eventTarget)==window?"window":e==document?"document":void 0;var e},enumerable:!0,configurable:!0}),e}(),a={a:function(e){return"click"},button:function(e){return"click"},form:function(e){return"submit"},input:function(e){return"submit"==e.getAttribute("type")?"click":"change"},select:function(e){return"change"},textarea:function(e){return"change"}};function l(e){throw new Error(e)}var c=function(){function e(e,t){this.context=e,this.action=t}return Object.defineProperty(e.prototype,"index",{get:function(){return this.action.index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventTarget",{get:function(){return this.action.eventTarget},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.context.identifier},enumerable:!0,configurable:!0}),e.prototype.handleEvent=function(e){this.willBeInvokedByEvent(e)&&this.invokeWithEvent(e)},Object.defineProperty(e.prototype,"eventName",{get:function(){return this.action.eventName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"method",{get:function(){var e=this.controller[this.methodName];if("function"==typeof e)return e;throw new Error('Action "'+this.action+'" references undefined method "'+this.methodName+'"')},enumerable:!0,configurable:!0}),e.prototype.invokeWithEvent=function(e){try{this.method.call(this.controller,e)}catch(n){var t={identifier:this.identifier,controller:this.controller,element:this.element,index:this.index,event:e};this.context.handleError(n,'invoking action "'+this.action+'"',t)}},e.prototype.willBeInvokedByEvent=function(e){var t=e.target;return this.element===t||(!(t instanceof Element&&this.element.contains(t))||this.scope.containsElement(t))},Object.defineProperty(e.prototype,"controller",{get:function(){return this.context.controller},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"methodName",{get:function(){return this.action.methodName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this.context.scope},enumerable:!0,configurable:!0}),e}(),u=function(){function e(e,t){var n=this;this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver((function(e){return n.processMutations(e)}))}return e.prototype.start=function(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,childList:!0,subtree:!0}),this.refresh())},e.prototype.stop=function(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)},e.prototype.refresh=function(){if(this.started){for(var e=new Set(this.matchElementsInTree()),t=0,n=Array.from(this.elements);t<n.length;t++){var r=n[t];e.has(r)||this.removeElement(r)}for(var o=0,i=Array.from(e);o<i.length;o++){r=i[o];this.addElement(r)}}},e.prototype.processMutations=function(e){if(this.started)for(var t=0,n=e;t<n.length;t++){var r=n[t];this.processMutation(r)}},e.prototype.processMutation=function(e){"attributes"==e.type?this.processAttributeChange(e.target,e.attributeName):"childList"==e.type&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))},e.prototype.processAttributeChange=function(e,t){var n=e;this.elements.has(n)?this.delegate.elementAttributeChanged&&this.matchElement(n)?this.delegate.elementAttributeChanged(n,t):this.removeElement(n):this.matchElement(n)&&this.addElement(n)},e.prototype.processRemovedNodes=function(e){for(var t=0,n=Array.from(e);t<n.length;t++){var r=n[t],o=this.elementFromNode(r);o&&this.processTree(o,this.removeElement)}},e.prototype.processAddedNodes=function(e){for(var t=0,n=Array.from(e);t<n.length;t++){var r=n[t],o=this.elementFromNode(r);o&&this.elementIsActive(o)&&this.processTree(o,this.addElement)}},e.prototype.matchElement=function(e){return this.delegate.matchElement(e)},e.prototype.matchElementsInTree=function(e){return void 0===e&&(e=this.element),this.delegate.matchElementsInTree(e)},e.prototype.processTree=function(e,t){for(var n=0,r=this.matchElementsInTree(e);n<r.length;n++){var o=r[n];t.call(this,o)}},e.prototype.elementFromNode=function(e){if(e.nodeType==Node.ELEMENT_NODE)return e},e.prototype.elementIsActive=function(e){return e.isConnected==this.element.isConnected&&this.element.contains(e)},e.prototype.addElement=function(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))},e.prototype.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))},e}(),d=function(){function e(e,t,n){this.attributeName=t,this.delegate=n,this.elementObserver=new u(e,this)}return Object.defineProperty(e.prototype,"element",{get:function(){return this.elementObserver.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selector",{get:function(){return"["+this.attributeName+"]"},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.elementObserver.start()},e.prototype.stop=function(){this.elementObserver.stop()},e.prototype.refresh=function(){this.elementObserver.refresh()},Object.defineProperty(e.prototype,"started",{get:function(){return this.elementObserver.started},enumerable:!0,configurable:!0}),e.prototype.matchElement=function(e){return e.hasAttribute(this.attributeName)},e.prototype.matchElementsInTree=function(e){var t=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(this.selector));return t.concat(n)},e.prototype.elementMatched=function(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)},e.prototype.elementUnmatched=function(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)},e.prototype.elementAttributeChanged=function(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)},e}();function f(e,t,n){h(e,t).add(n)}function p(e,t,n){h(e,t).delete(n),function(e,t){var n=e.get(t);null!=n&&0==n.size&&e.delete(t)}(e,t)}function h(e,t){var n=e.get(t);return n||(n=new Set,e.set(t,n)),n}var m=function(){function e(){this.valuesByKey=new Map}return Object.defineProperty(e.prototype,"values",{get:function(){return Array.from(this.valuesByKey.values()).reduce((function(e,t){return e.concat(Array.from(t))}),[])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return Array.from(this.valuesByKey.values()).reduce((function(e,t){return e+t.size}),0)},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){f(this.valuesByKey,e,t)},e.prototype.delete=function(e,t){p(this.valuesByKey,e,t)},e.prototype.has=function(e,t){var n=this.valuesByKey.get(e);return null!=n&&n.has(t)},e.prototype.hasKey=function(e){return this.valuesByKey.has(e)},e.prototype.hasValue=function(e){return Array.from(this.valuesByKey.values()).some((function(t){return t.has(e)}))},e.prototype.getValuesForKey=function(e){var t=this.valuesByKey.get(e);return t?Array.from(t):[]},e.prototype.getKeysForValue=function(e){return Array.from(this.valuesByKey).filter((function(t){t[0];return t[1].has(e)})).map((function(e){var t=e[0];e[1];return t}))},e}(),y=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),b=(function(e){function t(){var t=e.call(this)||this;return t.keysByValue=new Map,t}y(t,e),Object.defineProperty(t.prototype,"values",{get:function(){return Array.from(this.keysByValue.keys())},enumerable:!0,configurable:!0}),t.prototype.add=function(t,n){e.prototype.add.call(this,t,n),f(this.keysByValue,n,t)},t.prototype.delete=function(t,n){e.prototype.delete.call(this,t,n),p(this.keysByValue,n,t)},t.prototype.hasValue=function(e){return this.keysByValue.has(e)},t.prototype.getKeysForValue=function(e){var t=this.keysByValue.get(e);return t?Array.from(t):[]}}(m),function(){function e(e,t,n){this.attributeObserver=new d(e,t,this),this.delegate=n,this.tokensByElement=new m}return Object.defineProperty(e.prototype,"started",{get:function(){return this.attributeObserver.started},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.attributeObserver.start()},e.prototype.stop=function(){this.attributeObserver.stop()},e.prototype.refresh=function(){this.attributeObserver.refresh()},Object.defineProperty(e.prototype,"element",{get:function(){return this.attributeObserver.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attributeName",{get:function(){return this.attributeObserver.attributeName},enumerable:!0,configurable:!0}),e.prototype.elementMatchedAttribute=function(e){this.tokensMatched(this.readTokensForElement(e))},e.prototype.elementAttributeValueChanged=function(e){var t=this.refreshTokensForElement(e),n=t[0],r=t[1];this.tokensUnmatched(n),this.tokensMatched(r)},e.prototype.elementUnmatchedAttribute=function(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))},e.prototype.tokensMatched=function(e){var t=this;e.forEach((function(e){return t.tokenMatched(e)}))},e.prototype.tokensUnmatched=function(e){var t=this;e.forEach((function(e){return t.tokenUnmatched(e)}))},e.prototype.tokenMatched=function(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)},e.prototype.tokenUnmatched=function(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)},e.prototype.refreshTokensForElement=function(e){var t,n,r,o=this.tokensByElement.getValuesForKey(e),i=this.readTokensForElement(e),s=(t=o,n=i,r=Math.max(t.length,n.length),Array.from({length:r},(function(e,r){return[t[r],n[r]]}))).findIndex((function(e){return!function(e,t){return e&&t&&e.index==t.index&&e.content==t.content}(e[0],e[1])}));return-1==s?[[],[]]:[o.slice(s),i.slice(s)]},e.prototype.readTokensForElement=function(e){var t=this.attributeName;return function(e,t,n){return e.trim().split(/\s+/).filter((function(e){return e.length})).map((function(e,r){return{element:t,attributeName:n,content:e,index:r}}))}(e.getAttribute(t)||"",e,t)},e}());var g=function(){function e(e,t,n){this.tokenListObserver=new b(e,t,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}return Object.defineProperty(e.prototype,"started",{get:function(){return this.tokenListObserver.started},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.tokenListObserver.start()},e.prototype.stop=function(){this.tokenListObserver.stop()},e.prototype.refresh=function(){this.tokenListObserver.refresh()},Object.defineProperty(e.prototype,"element",{get:function(){return this.tokenListObserver.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attributeName",{get:function(){return this.tokenListObserver.attributeName},enumerable:!0,configurable:!0}),e.prototype.tokenMatched=function(e){var t=e.element,n=this.fetchParseResultForToken(e).value;n&&(this.fetchValuesByTokenForElement(t).set(e,n),this.delegate.elementMatchedValue(t,n))},e.prototype.tokenUnmatched=function(e){var t=e.element,n=this.fetchParseResultForToken(e).value;n&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,n))},e.prototype.fetchParseResultForToken=function(e){var t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t},e.prototype.fetchValuesByTokenForElement=function(e){var t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t},e.prototype.parseToken=function(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(e){return{error:e}}},e}(),v=function(){function e(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}return e.prototype.start=function(){this.valueListObserver||(this.valueListObserver=new g(this.element,this.actionAttribute,this),this.valueListObserver.start())},e.prototype.stop=function(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())},Object.defineProperty(e.prototype,"element",{get:function(){return this.context.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.context.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actionAttribute",{get:function(){return this.schema.actionAttribute},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return this.context.schema},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bindings",{get:function(){return Array.from(this.bindingsByAction.values())},enumerable:!0,configurable:!0}),e.prototype.connectAction=function(e){var t=new c(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)},e.prototype.disconnectAction=function(e){var t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))},e.prototype.disconnectAllActions=function(){var e=this;this.bindings.forEach((function(t){return e.delegate.bindingDisconnected(t)})),this.bindingsByAction.clear()},e.prototype.parseValueForToken=function(e){var t=s.forToken(e);if(t.identifier==this.identifier)return t},e.prototype.elementMatchedValue=function(e,t){this.connectAction(t)},e.prototype.elementUnmatchedValue=function(e,t){this.disconnectAction(t)},e}(),x=function(){function e(e,t){this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new v(this,this.dispatcher);try{this.controller.initialize()}catch(e){this.handleError(e,"initializing controller")}}return e.prototype.connect=function(){this.bindingObserver.start();try{this.controller.connect()}catch(e){this.handleError(e,"connecting controller")}},e.prototype.disconnect=function(){try{this.controller.disconnect()}catch(e){this.handleError(e,"disconnecting controller")}this.bindingObserver.stop()},Object.defineProperty(e.prototype,"application",{get:function(){return this.module.application},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.module.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return this.application.schema},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dispatcher",{get:function(){return this.application.dispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentElement",{get:function(){return this.element.parentElement},enumerable:!0,configurable:!0}),e.prototype.handleError=function(e,t,n){void 0===n&&(n={});var r=this.identifier,o=this.controller,i=this.element;n=Object.assign({identifier:r,controller:o,element:i},n),this.application.handleError(e,"Error "+t,n)},e}(),E=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function w(e){var t=O(e);return t.bless(),t}var O=function(){function e(e){function t(){var n=this&&this instanceof t?this.constructor:void 0;return Reflect.construct(e,arguments,n)}return t.prototype=Object.create(e.prototype,{constructor:{value:t}}),Reflect.setPrototypeOf(t,e),t}try{return(t=e((function(){this.a.call(this)}))).prototype.a=function(){},new t,e}catch(e){return function(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t}(e)}}var t}(),A=function(){function e(e,t){this.application=e,this.definition=function(e){return{identifier:e.identifier,controllerConstructor:w(e.controllerConstructor)}}(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}return Object.defineProperty(e.prototype,"identifier",{get:function(){return this.definition.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controllerConstructor",{get:function(){return this.definition.controllerConstructor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contexts",{get:function(){return Array.from(this.connectedContexts)},enumerable:!0,configurable:!0}),e.prototype.connectContextForScope=function(e){var t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()},e.prototype.disconnectContextForScope=function(e){var t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())},e.prototype.fetchContextForScope=function(e){var t=this.contextsByScope.get(e);return t||(t=new x(this,e),this.contextsByScope.set(e,t)),t},e}(),_=function(){function e(e){this.scope=e}return Object.defineProperty(e.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!0,configurable:!0}),e.prototype.get=function(e){return e=this.getFormattedKey(e),this.element.getAttribute(e)},e.prototype.set=function(e,t){return e=this.getFormattedKey(e),this.element.setAttribute(e,t),this.get(e)},e.prototype.has=function(e){return e=this.getFormattedKey(e),this.element.hasAttribute(e)},e.prototype.delete=function(e){return!!this.has(e)&&(e=this.getFormattedKey(e),this.element.removeAttribute(e),!0)},e.prototype.getFormattedKey=function(e){return"data-"+this.identifier+"-"+e.replace(/([A-Z])/g,(function(e,t){return"-"+t.toLowerCase()}))},e}();function C(e,t){return"["+e+'~="'+t+'"]'}var S=function(){function e(e){this.scope=e}return Object.defineProperty(e.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return this.scope.schema},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return null!=this.find(e)},e.prototype.find=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.getSelectorForTargetNames(e);return this.scope.findElement(n)},e.prototype.findAll=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.getSelectorForTargetNames(e);return this.scope.findAllElements(n)},e.prototype.getSelectorForTargetNames=function(e){var t=this;return e.map((function(e){return t.getSelectorForTargetName(e)})).join(", ")},e.prototype.getSelectorForTargetName=function(e){var t=this.identifier+"."+e;return C(this.schema.targetAttribute,t)},e}(),T=function(){function e(e,t,n){this.schema=e,this.identifier=t,this.element=n,this.targets=new S(this),this.data=new _(this)}return e.prototype.findElement=function(e){return this.findAllElements(e)[0]},e.prototype.findAllElements=function(e){var t=this.element.matches(e)?[this.element]:[],n=this.filterElements(Array.from(this.element.querySelectorAll(e)));return t.concat(n)},e.prototype.filterElements=function(e){var t=this;return e.filter((function(e){return t.containsElement(e)}))},e.prototype.containsElement=function(e){return e.closest(this.controllerSelector)===this.element},Object.defineProperty(e.prototype,"controllerSelector",{get:function(){return C(this.schema.controllerAttribute,this.identifier)},enumerable:!0,configurable:!0}),e}(),N=function(){function e(e,t,n){this.element=e,this.schema=t,this.delegate=n,this.valueListObserver=new g(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}return e.prototype.start=function(){this.valueListObserver.start()},e.prototype.stop=function(){this.valueListObserver.stop()},Object.defineProperty(e.prototype,"controllerAttribute",{get:function(){return this.schema.controllerAttribute},enumerable:!0,configurable:!0}),e.prototype.parseValueForToken=function(e){var t=e.element,n=e.content,r=this.fetchScopesByIdentifierForElement(t),o=r.get(n);return o||(o=new T(this.schema,n,t),r.set(n,o)),o},e.prototype.elementMatchedValue=function(e,t){var n=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,n),1==n&&this.delegate.scopeConnected(t)},e.prototype.elementUnmatchedValue=function(e,t){var n=this.scopeReferenceCounts.get(t);n&&(this.scopeReferenceCounts.set(t,n-1),1==n&&this.delegate.scopeDisconnected(t))},e.prototype.fetchScopesByIdentifierForElement=function(e){var t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t},e}(),P=function(){function e(e){this.application=e,this.scopeObserver=new N(this.element,this.schema,this),this.scopesByIdentifier=new m,this.modulesByIdentifier=new Map}return Object.defineProperty(e.prototype,"element",{get:function(){return this.application.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return this.application.schema},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controllerAttribute",{get:function(){return this.schema.controllerAttribute},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modules",{get:function(){return Array.from(this.modulesByIdentifier.values())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contexts",{get:function(){return this.modules.reduce((function(e,t){return e.concat(t.contexts)}),[])},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.scopeObserver.start()},e.prototype.stop=function(){this.scopeObserver.stop()},e.prototype.loadDefinition=function(e){this.unloadIdentifier(e.identifier);var t=new A(this.application,e);this.connectModule(t)},e.prototype.unloadIdentifier=function(e){var t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)},e.prototype.getContextForElementAndIdentifier=function(e,t){var n=this.modulesByIdentifier.get(t);if(n)return n.contexts.find((function(t){return t.element==e}))},e.prototype.handleError=function(e,t,n){this.application.handleError(e,t,n)},e.prototype.scopeConnected=function(e){this.scopesByIdentifier.add(e.identifier,e);var t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)},e.prototype.scopeDisconnected=function(e){this.scopesByIdentifier.delete(e.identifier,e);var t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)},e.prototype.connectModule=function(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach((function(t){return e.connectContextForScope(t)}))},e.prototype.disconnectModule=function(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach((function(t){return e.disconnectContextForScope(t)}))},e}(),j={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target"},L=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}l((r=r.apply(e,t||[])).next())}))},R=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},k=function(){function e(e,t){void 0===e&&(e=document.documentElement),void 0===t&&(t=j),this.element=e,this.schema=t,this.dispatcher=new o(this),this.router=new P(this)}return e.start=function(t,n){var r=new e(t,n);return r.start(),r},e.prototype.start=function(){return L(this,void 0,void 0,(function(){return R(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(e){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",e):e()}))];case 1:return e.sent(),this.router.start(),this.dispatcher.start(),[2]}}))}))},e.prototype.stop=function(){this.router.stop(),this.dispatcher.stop()},e.prototype.register=function(e,t){this.load({identifier:e,controllerConstructor:t})},e.prototype.load=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=Array.isArray(e)?e:[e].concat(n);o.forEach((function(e){return t.router.loadDefinition(e)}))},e.prototype.unload=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=Array.isArray(e)?e:[e].concat(n);o.forEach((function(e){return t.router.unloadIdentifier(e)}))},Object.defineProperty(e.prototype,"controllers",{get:function(){return this.router.contexts.map((function(e){return e.controller}))},enumerable:!0,configurable:!0}),e.prototype.getControllerForElementAndIdentifier=function(e,t){var n=this.router.getContextForElementAndIdentifier(e,t);return n?n.controller:null},e.prototype.handleError=function(e,t,n){console.error("%s\n\n%o\n\n%o",t,e,n)},e}();function I(e){var t=e.prototype;(function(e){var t=function(e){var t=[];for(;e;)t.push(e),e=Object.getPrototypeOf(e);return t}(e);return Array.from(t.reduce((function(e,t){return function(e){var t=e.targets;return Array.isArray(t)?t:[]}(t).forEach((function(t){return e.add(t)})),e}),new Set))})(e).forEach((function(e){var n,r,o;return r=t,(n={})[e+"Target"]={get:function(){var t=this.targets.find(e);if(t)return t;throw new Error('Missing target element "'+this.identifier+"."+e+'"')}},n[e+"Targets"]={get:function(){return this.targets.findAll(e)}},n["has"+function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(e)+"Target"]={get:function(){return this.targets.has(e)}},o=n,void Object.keys(o).forEach((function(e){if(!(e in r)){var t=o[e];Object.defineProperty(r,e,t)}}))}))}var M=function(){function e(e){this.context=e}return e.bless=function(){I(this)},Object.defineProperty(e.prototype,"application",{get:function(){return this.context.application},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this.context.scope},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targets",{get:function(){return this.scope.targets},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.scope.data},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){},e.prototype.connect=function(){},e.prototype.disconnect=function(){},e.targets=[],e}();const B={reflexAttribute:"data-reflex",reflexPermanentAttribute:"data-reflex-permanent",reflexRootAttribute:"data-reflex-root",reflexDatasetAttribute:"data-reflex-dataset",reflexDatasetAllAttribute:"data-reflex-dataset-all",reflexSerializeFormAttribute:"data-reflex-serialize-form"},D={INPUT:!0,TEXTAREA:!0,SELECT:!0},F={INPUT:!0,TEXTAREA:!0,OPTION:!0},$={"datetime-local":!0,"select-multiple":!0,"select-one":!0,color:!0,date:!0,datetime:!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,textarea:!0,time:!0,url:!0,week:!0};let U;var V={get element(){return U},set(e){U=e}};const z=e=>{const t=(e&&e.nodeType===Node.ELEMENT_NODE?e:document.querySelector(e))||V.element;t&&t.focus&&t.focus()},q=(e,t,n={})=>{const r=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e.dispatchEvent(r),window.jQuery&&window.jQuery(e).trigger(t,n)},K=e=>Array(e).flat(),H=(e,t)=>{Array.from(e.selectAll?e.element:[e.element]).forEach(t)},W=e=>e.split("").map((e,t)=>e.toUpperCase()===e?`${0!==t?"-":""}${e.toLowerCase()}`:e).join(""),G=(e,t)=>!e.cancel&&(e.delay?setTimeout(t,e.delay):t(),!0),Q=(e,t,n)=>q(e,`cable-ready:before-${W(t)}`,n),X=(e,t,n)=>q(e,`cable-ready:after-${W(t)}`,n),J=e=>(t,n)=>!Z.map(r=>"function"!=typeof r||r(e,t,n)).includes(!1),Y=e=>t=>{ee.forEach(n=>{"function"==typeof n&&n(e,t)})},Z=[(e,t,n)=>!(!F[t.tagName]&&t.isEqualNode(n)),(e,t,n)=>{const{permanentAttributeName:r}=e;if(!r)return!0;const o=t.closest(`[${r}]`);if(!o&&(D[(i=t).tagName]&&$[i.type])&&t===V.element){const e={value:!0};return Array.from(n.attributes).forEach(n=>{e[n.name]||t.setAttribute(n.name,n.value)}),!1}var i;return!o}],ee=[];var te;var ne="undefined"==typeof document?void 0:document,re=!!ne&&"content"in ne.createElement("template"),oe=!!ne&&ne.createRange&&"createContextualFragment"in ne.createRange();function ie(e){return e=e.trim(),re?function(e){var t=ne.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}(e):oe?function(e){return te||(te=ne.createRange()).selectNode(ne.body),te.createContextualFragment(e).childNodes[0]}(e):function(e){var t=ne.createElement("body");return t.innerHTML=e,t.childNodes[0]}(e)}function se(e,t){var n,r,o=e.nodeName,i=t.nodeName;return o===i||(n=o.charCodeAt(0),r=i.charCodeAt(0),n<=90&&r>=97?o===i.toUpperCase():r<=90&&n>=97&&i===o.toUpperCase())}function ae(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}var le={OPTION:function(e,t){var n=e.parentNode;if(n){var r=n.nodeName.toUpperCase();"OPTGROUP"===r&&(r=(n=n.parentNode)&&n.nodeName.toUpperCase()),"SELECT"!==r||n.hasAttribute("multiple")||(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}ae(e,t,"selected")},INPUT:function(e,t){ae(e,t,"checked"),ae(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var r=e.firstChild;if(r){var o=r.nodeValue;if(o==n||!n&&o==e.placeholder)return;r.nodeValue=n}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var n,r,o=-1,i=0,s=e.firstChild;s;)if("OPTGROUP"===(r=s.nodeName&&s.nodeName.toUpperCase()))s=(n=s).firstChild;else{if("OPTION"===r){if(s.hasAttribute("selected")){o=i;break}i++}!(s=s.nextSibling)&&n&&(s=n.nextSibling,n=null)}e.selectedIndex=o}}};function ce(){}function ue(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}var de=function(e){return function(t,n,r){if(r||(r={}),"string"==typeof n)if("#document"===t.nodeName||"HTML"===t.nodeName||"BODY"===t.nodeName){var o=n;(n=ne.createElement("html")).innerHTML=o}else n=ie(n);var i=r.getNodeKey||ue,s=r.onBeforeNodeAdded||ce,a=r.onNodeAdded||ce,l=r.onBeforeElUpdated||ce,c=r.onElUpdated||ce,u=r.onBeforeNodeDiscarded||ce,d=r.onNodeDiscarded||ce,f=r.onBeforeElChildrenUpdated||ce,p=!0===r.childrenOnly,h=Object.create(null),m=[];function y(e){m.push(e)}function b(e,t,n){!1!==u(e)&&(t&&t.removeChild(e),d(e),function e(t,n){if(1===t.nodeType)for(var r=t.firstChild;r;){var o=void 0;n&&(o=i(r))?y(o):(d(r),r.firstChild&&e(r,n)),r=r.nextSibling}}(e,n))}function g(e){a(e);for(var t=e.firstChild;t;){var n=t.nextSibling,r=i(t);if(r){var o=h[r];o&&se(t,o)?(t.parentNode.replaceChild(o,t),v(o,t)):g(t)}else g(t);t=n}}function v(t,n,r){var o=i(n);if(o&&delete h[o],!r){if(!1===l(t,n))return;if(e(t,n),c(t),!1===f(t,n))return}"TEXTAREA"!==t.nodeName?function(e,t){var n,r,o,a,l,c=t.firstChild,u=e.firstChild;e:for(;c;){for(a=c.nextSibling,n=i(c);u;){if(o=u.nextSibling,c.isSameNode&&c.isSameNode(u)){c=a,u=o;continue e}r=i(u);var d=u.nodeType,f=void 0;if(d===c.nodeType&&(1===d?(n?n!==r&&((l=h[n])?o===l?f=!1:(e.insertBefore(l,u),r?y(r):b(u,e,!0),u=l):f=!1):r&&(f=!1),(f=!1!==f&&se(u,c))&&v(u,c)):3!==d&&8!=d||(f=!0,u.nodeValue!==c.nodeValue&&(u.nodeValue=c.nodeValue))),f){c=a,u=o;continue e}r?y(r):b(u,e,!0),u=o}if(n&&(l=h[n])&&se(l,c))e.appendChild(l),v(l,c);else{var p=s(c);!1!==p&&(p&&(c=p),c.actualize&&(c=c.actualize(e.ownerDocument||ne)),e.appendChild(c),g(c))}c=a,u=o}!function(e,t,n){for(;t;){var r=t.nextSibling;(n=i(t))?y(n):b(t,e,!0),t=r}}(e,u,r);var m=le[e.nodeName];m&&m(e,t)}(t,n):le.TEXTAREA(t,n)}!function e(t){if(1===t.nodeType||11===t.nodeType)for(var n=t.firstChild;n;){var r=i(n);r&&(h[r]=n),e(n),n=n.nextSibling}}(t);var x,E,w=t,O=w.nodeType,A=n.nodeType;if(!p)if(1===O)1===A?se(t,n)||(d(t),w=function(e,t){for(var n=e.firstChild;n;){var r=n.nextSibling;t.appendChild(n),n=r}return t}(t,(x=n.nodeName,(E=n.namespaceURI)&&"http://www.w3.org/1999/xhtml"!==E?ne.createElementNS(E,x):ne.createElement(x)))):w=n;else if(3===O||8===O){if(A===O)return w.nodeValue!==n.nodeValue&&(w.nodeValue=n.nodeValue),w;w=n}if(w===n)d(t);else{if(n.isSameNode&&n.isSameNode(w))return;if(v(w,n,p),m)for(var _=0,C=m.length;_<C;_++){var S=h[m[_]];S&&b(S,S.parentNode,!1)}}return!p&&w!==t&&t.parentNode&&(w.actualize&&(w=w.actualize(t.ownerDocument||ne)),t.parentNode.replaceChild(w,t)),w}}((function(e,t){var n,r,o,i,s=t.attributes;if(11!==t.nodeType&&11!==e.nodeType){for(var a=s.length-1;a>=0;a--)r=(n=s[a]).name,o=n.namespaceURI,i=n.value,o?(r=n.localName||r,e.getAttributeNS(o,r)!==i&&("xmlns"===n.prefix&&(r=n.name),e.setAttributeNS(o,r,i))):e.getAttribute(r)!==i&&e.setAttribute(r,i);for(var l=e.attributes,c=l.length-1;c>=0;c--)r=(n=l[c]).name,(o=n.namespaceURI)?(r=n.localName||r,t.hasAttributeNS(o,r)||e.removeAttributeNS(o,r)):t.hasAttribute(r)||e.removeAttribute(r)}}));let fe={append:(e,t)=>{H(e,n=>{Q(n,t,e),G(e,()=>{const{html:t,focusSelector:r}=e;n.insertAdjacentHTML("beforeend",t||""),z(r)}),X(n,t,e)})},graft:(e,t)=>{H(e,n=>{Q(n,t,e),G(e,()=>{const{parent:t,focusSelector:r}=e,o=document.querySelector(t);o&&(o.appendChild(n),z(r))}),X(n,t,e)})},innerHtml:(e,t)=>{H(e,n=>{Q(n,t,e),G(e,()=>{const{html:t,focusSelector:r}=e;n.innerHTML=t||"",z(r)}),X(n,t,e)})},insertAdjacentHtml:(e,t)=>{H(e,n=>{Q(n,t,e),G(e,()=>{const{html:t,position:r,focusSelector:o}=e;n.insertAdjacentHTML(r||"beforeend",t||""),z(o)}),X(n,t,e)})},insertAdjacentText:(e,t)=>{H(e,n=>{Q(n,t,e),G(e,()=>{const{text:t,position:r,focusSelector:o}=e;n.insertAdjacentText(r||"beforeend",t||""),z(o)}),X(n,t,e)})},morph:(e,t)=>{H(e,n=>{const{html:r}=e,o=document.createElement("template");o.innerHTML=String(r).trim(),e.content=o.content;const i=n.parentElement,s=Array.from(i.children).indexOf(n);Q(n,t,e),G(e,()=>{const{childrenOnly:t,focusSelector:r}=e;de(n,t?o.content:o.innerHTML,{childrenOnly:!!t,onBeforeElUpdated:J(e),onElUpdated:Y(e)}),z(r)}),X(i.children[s],t,e)})},outerHtml:(e,t)=>{H(e,n=>{const r=n.parentElement,o=Array.from(r.children).indexOf(n);Q(n,t,e),G(e,()=>{const{html:t,focusSelector:r}=e;n.outerHTML=t||"",z(r)}),X(r.children[o],t,e)})},prepend:(e,t)=>{H(e,n=>{Q(n,t,e),G(e,()=>{const{html:t,focusSelector:r}=e;n.insertAdjacentHTML("afterbegin",t||""),z(r)}),X(n,t,e)})},remove:(e,t)=>{H(e,n=>{Q(n,t,e),G(e,()=>{const{focusSelector:t}=e;n.remove(),z(t)}),X(document,t,e)})},replace:(e,t)=>{H(e,n=>{const r=n.parentElement,o=Array.from(r.children).indexOf(n);Q(n,t,e),G(e,()=>{const{html:t,focusSelector:r}=e;n.outerHTML=t||"",z(r)}),X(r.children[o],t,e)})},textContent:(e,t)=>{H(e,n=>{Q(n,t,e),G(e,()=>{const{text:t,focusSelector:r}=e;n.textContent=t||"",z(r)}),X(n,t,e)})},addCssClass:(e,t)=>{H(e,n=>{Q(n,t,e),G(e,()=>{const{name:t}=e;n.classList.add(...K(t||""))}),X(n,t,e)})},removeAttribute:(e,t)=>{H(e,n=>{Q(n,t,e),G(e,()=>{const{name:t}=e;n.removeAttribute(t)}),X(n,t,e)})},removeCssClass:(e,t)=>{H(e,n=>{Q(n,t,e),G(e,()=>{const{name:t}=e;n.classList.remove(...K(t))}),X(n,t,e)})},setAttribute:(e,t)=>{H(e,n=>{Q(n,t,e),G(e,()=>{const{name:t,value:r}=e;n.setAttribute(t,r||"")}),X(n,t,e)})},setDatasetProperty:(e,t)=>{H(e,n=>{Q(n,t,e),G(e,()=>{const{name:t,value:r}=e;n.dataset[t]=r||""}),X(n,t,e)})},setProperty:(e,t)=>{H(e,n=>{Q(n,t,e),G(e,()=>{const{name:t,value:r}=e;t in n&&(n[t]=r||"")}),X(n,t,e)})},setStyle:(e,t)=>{H(e,n=>{Q(n,t,e),G(e,()=>{const{name:t,value:r}=e;n.style[t]=r||""}),X(n,t,e)})},setStyles:(e,t)=>{H(e,n=>{Q(n,t,e),G(e,()=>{const{styles:t}=e;for(let[e,r]of Object.entries(t))n.style[e]=r||""}),X(n,t,e)})},setValue:(e,t)=>{H(e,n=>{Q(n,t,e),G(e,()=>{const{value:t}=e;n.value=t||""}),X(n,t,e)})},dispatchEvent:(e,t)=>{H(e,t=>{G(e,()=>{const{name:n,detail:r}=e;q(t,n,r)})})},setMeta:(e,t)=>{Q(document,t,e),G(e,()=>{const{name:t,content:n}=e;let r=document.head.querySelector(`meta[name='${t}']`);r||(r=document.createElement("meta"),r.name=t,document.head.appendChild(r)),r.content=n}),X(document,t,e)},clearStorage:(e,t)=>{Q(document,t,e),G(e,()=>{const{type:t}=e;("session"===t?sessionStorage:localStorage).clear()}),X(document,t,e)},go:(e,t)=>{Q(window,t,e),G(e,()=>{const{delta:t}=e;history.go(t)}),X(window,t,e)},pushState:(e,t)=>{Q(window,t,e),G(e,()=>{const{state:t,title:n,url:r}=e;history.pushState(t||{},n||"",r)}),X(window,t,e)},removeStorageItem:(e,t)=>{Q(document,t,e),G(e,()=>{const{key:t,type:n}=e;("session"===n?sessionStorage:localStorage).removeItem(t)}),X(document,t,e)},replaceState:(e,t)=>{Q(window,t,e),G(e,()=>{const{state:t,title:n,url:r}=e;history.replaceState(t||{},n||"",r)}),X(window,t,e)},scrollIntoView:(e,t)=>{const{element:n}=e;Q(n,t,e),G(e,()=>{n.scrollIntoView(e)}),X(n,t,e)},setCookie:(e,t)=>{Q(document,t,e),G(e,()=>{const{cookie:t}=e;document.cookie=t||""}),X(document,t,e)},setFocus:(e,t)=>{const{element:n}=e;Q(n,t,e),G(e,()=>{z(n)}),X(n,t,e)},setStorageItem:(e,t)=>{Q(document,t,e),G(e,()=>{const{key:t,value:n,type:r}=e;("session"===r?sessionStorage:localStorage).setItem(t,n||"")}),X(document,t,e)},consoleLog:(e,t)=>{G(e,()=>{const{message:t,level:n}=e;n&&["warn","info","error"].includes(n)?console[n](t||""):console.log(t||"")})},consoleTable:(e,t)=>{G(e,()=>{const{data:t,columns:n}=e;console.table(t,n||[])})},notification:(e,t)=>{Q(document,t,e),G(e,()=>{const{title:t,options:n}=e;Notification.requestPermission().then(r=>{e.permission=r,"granted"===r&&new Notification(t||"",n)})}),X(document,t,e)}};const pe=e=>{fe={...fe,...e}};var he={get all(){return fe}};let me;var ye={setConsumer(e){me=e}};const be=(e,t={emitMissingElementWarnings:!0})=>{for(let r in e)if(e.hasOwnProperty(r)){const o=e[r];for(let e=0;e<o.length;e++){const i=o[e];try{if(i.selector?i.element=i.xpath?(n=i.selector,document.evaluate(n,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):document[i.selectAll?"querySelectorAll":"querySelector"](i.selector):i.element=document,i.element||t.emitMissingElementWarnings){V.set(document.activeElement);const e=he.all[r];e?e(i,r):console.error(`CableReady couldn't find the "${r}" operation. Make sure you haven't misspelled the operation name and that you've added all required operations.`)}}catch(e){i.element?(console.error(`CableReady detected an error in ${r}: ${e.message}. If you need to support older browsers make sure you've included the corresponding polyfills. https://docs.stimulusreflex.com/setup#polyfills-for-ie11.`),console.error(e)):console.log(`CableReady ${r} failed due to missing DOM element for selector: '${i.selector}'`)}}}var n};class ge extends HTMLElement{connectedCallback(){this.preview||(me?this.channel=me.subscriptions.create({channel:"CableReady::Stream",identifier:this.getAttribute("identifier")},{received(e){e.cableReady&&ve.perform(e.operations)}}):console.error("The `stream_from` helper cannot connect without an ActionCable consumer.\nPlease run `rails generate cable_ready:stream_from` to fix this."))}disconnectedCallback(){this.channel&&this.channel.unsubscribe()}get preview(){return document.documentElement.hasAttribute("data-turbolinks-preview")||document.documentElement.hasAttribute("data-turbo-preview")}}window.customElements.get("stream-from")||window.customElements.define("stream-from",ge);var ve={perform:be,performAsync:(e,t={emitMissingElementWarnings:!0})=>new Promise((n,r)=>{try{n(be(e,t))}catch(e){r(e)}}),shouldMorphCallbacks:Z,didMorphCallbacks:ee,initialize:(e={})=>{const{consumer:t}=e;ye.setConsumer(t)},addOperation:(e,t)=>{const n={};n[e]=t,pe(n)},addOperations:e=>{pe(e)},get DOMOperations(){return console.warn("DEPRECATED: Please use `CableReady.operations.jazzHands = ...` instead of `CableReady.DOMOperations.jazzHands = ...`"),he.all},get operations(){return he.all}};let xe=!1;var Ee={get enabled(){return xe},get disabled(){return!xe},get value(){return xe},set(e){xe=!!e},set debug(e){xe=!!e}};const we=()=>{const e=window.crypto||window.msCrypto;return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t=>(t^e.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))},Oe=(e,t=!0)=>"string"!=typeof e?"":(e=e.replace(/[\s_](.)/g,e=>e.toUpperCase()).replace(/[\s_]/g,"").replace(/^(.)/,e=>e.toLowerCase()),t&&(e=e.substr(0,1).toUpperCase()+e.substr(1)),e),Ae=(e,t)=>{document.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:!1,detail:t})),window.jQuery&&window.jQuery(document).trigger(e,t)},_e=e=>{if(""!==e.id)return"//*[@id='"+e.id+"']";if(e===document.body)return"/html/body";let t=0;const n=e.parentNode.childNodes;for(var r=0;r<n.length;r++){const o=n[r];if(o===e){return`${_e(e.parentNode)}/${e.tagName.toLowerCase()}[${t+1}]`}1===o.nodeType&&o.tagName===e.tagName&&t++}},Ce=e=>document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,Se=(e,t=!1)=>{const n=document.evaluate(e,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),r=[];for(let e=0;e<n.snapshotLength;e++)r.push(n.snapshotItem(e));return t?r.reverse():r},Te=(e,t,n,r,o)=>{if(!n||!n.reflexData[r])return;const i=n.reflexController[r],s=n.reflexData[r].target,a=s.split("#")[1],l=i[["before","after","finalize"].includes(e)?`${e}${Oe(a)}`:`${Oe(a,!1)}${Oe(e)}`],c=i[["before","after","finalize"].includes(e)?`${e}Reflex`:`reflex${Oe(e)}`];"function"==typeof l&&l.call(i,t,s,n.reflexError[r],r,o),"function"==typeof c&&c.call(i,t,s,n.reflexError[r],r,o),Xe[r]&&e===Xe[r].finalStage&&(Reflect.deleteProperty(n.reflexController,r),Reflect.deleteProperty(n.reflexData,r),Reflect.deleteProperty(n.reflexError,r))};document.addEventListener("stimulus-reflex:before",e=>Te("before",e.detail.element,e.detail.controller.element,e.detail.reflexId,e.detail.payload),!0),document.addEventListener("stimulus-reflex:success",e=>{Te("success",e.detail.element,e.detail.controller.element,e.detail.reflexId,e.detail.payload),Ne("after",e.detail.element,e.detail.controller.element,e.detail.reflexId,e.detail.payload)},!0),document.addEventListener("stimulus-reflex:nothing",e=>{Te("success",e.detail.element,e.detail.controller.element,e.detail.reflexId,e.detail.payload),Ne("after",e.detail.element,e.detail.controller.element,e.detail.reflexId,e.detail.payload)},!0),document.addEventListener("stimulus-reflex:error",e=>{Te("error",e.detail.element,e.detail.controller.element,e.detail.reflexId,e.detail.payload),Ne("after",e.detail.element,e.detail.controller.element,e.detail.reflexId,e.detail.payload)},!0),document.addEventListener("stimulus-reflex:halted",e=>Te("halted",e.detail.element,e.detail.controller.element,e.detail.reflexId,e.detail.payload),!0),document.addEventListener("stimulus-reflex:after",e=>Te("after",e.detail.element,e.detail.controller.element,e.detail.reflexId,e.detail.payload),!0),document.addEventListener("stimulus-reflex:finalize",e=>Te("finalize",e.detail.element,e.detail.controller.element,e.detail.reflexId,e.detail.payload),!0);const Ne=(e,t,n,r,o)=>{if(!n)return void(Ee.enabled&&!Xe[r].warned&&(console.warn(`StimulusReflex was not able execute callbacks or emit events for "${e}" or later life-cycle stages for this Reflex. The StimulusReflex Controller Element is no longer present in the DOM. Could you move the StimulusReflex Controller to an element higher in your DOM?`),Xe[r].warned=!0));if(!n.reflexController||n.reflexController&&!n.reflexController[r])return void(Ee.enabled&&!Xe[r].warned&&(console.warn(`StimulusReflex detected that the StimulusReflex Controller responsible for this Reflex has been replaced with a new instance. Callbacks and events for "${e}" or later life-cycle stages cannot be executed.`),Xe[r].warned=!0));const{target:i}=n.reflexData[r]||{},s=`stimulus-reflex:${e}`,a={reflex:i,controller:n.reflexController[r]||{},reflexId:r,element:t,payload:o};n.dispatchEvent(new CustomEvent(s,{bubbles:!0,cancelable:!1,detail:a})),window.jQuery&&window.jQuery(n).trigger(s,a)};let Pe,je,Le;const Re=()=>{Le=!0,Ae("stimulus-reflex:connected")},ke=()=>{Le=!1,Ae("stimulus-reflex:rejected"),Debug.enabled&&console.warn("Channel subscription was rejected.")},Ie=e=>{Le=!1,Ae("stimulus-reflex:disconnected",e)};var Me={consumer:Pe,params:je,get subscriptionActive(){return Le},createSubscription:e=>{Pe=Pe||e.application.consumer;const{channel:t}=e.StimulusReflex,n={channel:t,...je},r=JSON.stringify(n);e.StimulusReflex.subscription=Pe.subscriptions.findAll(r)[0]||Pe.subscriptions.create(n,{received:Je,connected:Re,rejected:ke,disconnected:Ie})},connected:Re,rejected:ke,disconnected:Ie,set(e,t){Pe=e,je=t}};let Be=!0;var De={get enabled(){return Be},get disabled(){return!Be},get value(){return Be},set(e){Be=!!e},set deprecate(e){Be=!!e}};const Fe=(e=[])=>{const t=e.filter(e=>e&&String(e).length).map(e=>e.trim()).join(" ").trim();return t.length?t:null},$e=e=>e&&e.length?e.split(" ").filter(e=>e.trim().length):[],Ue=e=>{let t=Array.from(e.attributes).reduce((e,t)=>(e[t.name]=t.value,e),{});if(t.checked=!!e.checked,t.selected=!!e.selected,t.tag_name=e.tagName,e.tagName.match(/select/i)||(e=>!!["checkbox","radio"].includes(e.type)&&document.querySelectorAll(`input[type="${e.type}"][name="${e.name}"]`).length>1)(e)){const n=(e=>Array.from(e.querySelectorAll("option:checked")).concat(Array.from(document.querySelectorAll(`input[type="${e.type}"][name="${e.name}"]`)).filter(e=>e.checked)).map(e=>e.value))(e);t.values=n,t.value=n.join(",")}else t.value=e.value;return t},Ve=(e,t)=>{if(!t||0===t.length)return[];let n=[e];const r=_e(e);return t.forEach(e=>{try{switch(e){case"combined":De.enabled&&console.warn("In the next version of StimulusReflex, the 'combined' option to data-reflex-dataset will become 'ancestors'."),n=[...n,...Se(`${r}/ancestor::*`,!0)];break;case"ancestors":n=[...n,...Se(`${r}/ancestor::*`,!0)];break;case"parent":n=[...n,...Se(`${r}/parent::*`)];break;case"siblings":n=[...n,...Se(`${r}/preceding-sibling::*|${r}/following-sibling::*`)];break;case"children":n=[...n,...Se(`${r}/child::*`)];break;case"descendants":n=[...n,...Se(`${r}/descendant::*`)];break;default:n=[...n,...document.querySelectorAll(e)]}}catch(e){Ee.enabled&&console.error(e)}}),n},ze=e=>{let t={};return e&&e.attributes&&Array.from(e.attributes).forEach(e=>{e.name.startsWith("data-")&&(t[e.name]=e.value)}),t},qe=(e,t)=>$e(t.getAttribute(e.schema.controllerAttribute)).reduce((n,r)=>{const o=e.getControllerForElementAndIdentifier(t,r);return o&&o.StimulusReflex&&n.push(o),n},[]);let Ke=!1;var He={get disabled(){return!Ke},set(e){Ke=e}};var We={request:function(e,t,n,r,o,i){Xe[e].timestamp=new Date,console.log(` stimulus  ${t}`,{reflexId:e,args:n,controller:r,element:o,controllerElement:i})},success:function(e){const{detail:t}=e||{},{selector:n,payload:r}=t||{},{reflexId:o,target:i,morph:s,serverMessage:a}=t.stimulusReflex||{},l=Xe[o],c=l.totalOperations>1?` ${l.completedOperations}/${l.totalOperations}`:"",u=l.timestamp?`in ${new Date-l.timestamp}ms`:"CLONED",d=e.type.split(":")[1].split("-").slice(1).join("_"),f=a&&"halted"===a.subject||!1;console.log(` reflex  ${i}  ${n||""}${c} ${u}`,{reflexId:o,morph:s,operation:d,halted:f,payload:r})},error:function(e){const{detail:t}=e||{},{reflexId:n,target:r,serverMessage:o}=t.stimulusReflex||{},i=Xe[n],s=i.timestamp?`in ${new Date-i.timestamp}ms`:"CLONED",a=t.stimulusReflex;console.log(` reflex  ${r} ${s} %cERROR: ${o.body}`,"color: #f00;",{reflexId:n,payload:a})}};const Ge={},Qe=we();var Xe=Ge;const Je=e=>{if(!e.cableReady)return;let t={};for(let n in e.operations)if(e.operations.hasOwnProperty(n)){for(let r=e.operations[n].length-1;r>=0;r--)(e.operations[n][r].stimulusReflex||e.operations[n][r].detail&&e.operations[n][r].detail.stimulusReflex)&&(t[n]=t[n]||[],t[n].push(e.operations[n][r]),e.operations[n].splice(r,1));e.operations[n].length||Reflect.deleteProperty(e.operations,n)}let n,r=0;if([t.dispatchEvent,t.morph,t.innerHtml].forEach(e=>{if(e&&e.length){const t=Array.from(new Set(e.map(e=>e.detail?e.detail.stimulusReflex.url:e.stimulusReflex.url)));if(1!==t.length||t[0]!==location.href)return;r+=e.length,n||(e[0].detail?(n=e[0].detail.stimulusReflex,n.payload=e[0].detail.payload,n.reflexId=e[0].detail.reflexId):(n=e[0].stimulusReflex,n.payload=e[0].payload))}}),n){const{reflexId:o,payload:i}=n;if(!Ge[o]&&He.disabled){const e=Ce(n.xpathController),t=Ce(n.xpathElement);e.reflexController=e.reflexController||{},e.reflexData=e.reflexData||{},e.reflexError=e.reflexError||{},e.reflexController[o]=Ge.app.getControllerForElementAndIdentifier(e,n.reflexController),e.reflexData[o]=n,Ne("before",t,e,o,i),Ye(n)}Ge[o]&&(Ge[o].totalOperations=r,Ge[o].pendingOperations=r,Ge[o].completedOperations=0,Ge[o].piggybackOperations=e.operations,ve.perform(t))}else{const t=Object.entries(e.operations);t.length&&Ge[t[0][1][0].reflexId]&&ve.perform(e.operations)}},Ye=e=>{const{reflexId:t}=e;Ge[t]={finalStage:"finalize"};const n=new Promise((n,r)=>{Ge[t].promise={resolve:n,reject:r,data:e}});return n.reflexId=t,Ee.enabled&&n.catch(()=>{}),n},Ze=((e,t=250)=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>{n=null,e(...r)},t)}})(()=>{document.querySelectorAll(`[${Ge.app.schema.reflexAttribute}]`).forEach(e=>{const t=$e(e.getAttribute(Ge.app.schema.controllerAttribute)),n=$e(e.getAttribute(Ge.app.schema.reflexAttribute)),r=$e(e.getAttribute(Ge.app.schema.actionAttribute));n.forEach(n=>{const o=((e,t)=>t.find(t=>{if(t.identifier)return(e=>{const t=e.match(/(?:.*->)?(.*?)(?:Reflex)?#/);return t?t[1]:""})(e).toLowerCase()===t.identifier.toLowerCase()})||t[0])(n,((e,t)=>{let n=[];for(;t;)n=n.concat(qe(e,t)),t=t.parentElement;return n})(Ge.app,e));let i;o?(i=`${n.split("->")[0]}->${o.identifier}#__perform`,r.includes(i)||r.push(i)):(i=`${n.split("->")[0]}->stimulus-reflex#__perform`,t.includes("stimulus-reflex")||t.push("stimulus-reflex"),r.includes(i)||r.push(i))});const o=Fe(t),i=Fe(r);o&&e.getAttribute(Ge.app.schema.controllerAttribute)!=o&&e.setAttribute(Ge.app.schema.controllerAttribute,o),i&&e.getAttribute(Ge.app.schema.actionAttribute)!=i&&e.setAttribute(Ge.app.schema.actionAttribute,i)}),Ae("stimulus-reflex:ready")},20),et={isActionCableConnectionOpen(){return this.StimulusReflex.subscription.consumer.connection.isOpen()},stimulate(){const e=location.href,t=Array.from(arguments),n=t.shift()||"StimulusReflex::Reflex#default_reflex",r=this.element,o=t[0]&&t[0].nodeType===Node.ELEMENT_NODE?t.shift():r;if("number"===o.type&&o.validity&&o.validity.badInput)return void(Ee.enabled&&console.warn("Reflex aborted: invalid numeric input"));const i={};if(t[0]&&"object"==typeof t[0]&&Object.keys(t[0]).filter(e=>["attrs","selectors","reflexId","resolveLate","serializeForm"].includes(e)).length){const e=t.shift();Object.keys(e).forEach(t=>i[t]=e[t])}const s=i.attrs||Ue(o),a=i.reflexId||we();let l=i.selectors||(e=>{let t=[];for(;0===t.length&&e;){let n=e.getAttribute(Ge.app.schema.reflexRootAttribute);if(n){0===n.length&&e.id&&(n=`#${e.id}`);const r=n.split(",").filter(e=>e.trim().length);Ee.enabled&&0===r.length&&console.error(`No value found for ${Ge.app.schema.reflexRootAttribute}. Add an #id to the element or provide a value for ${application.schema.reflexRootAttribute}.`,e),t=t.concat(r.filter(e=>document.querySelector(e)))}e=e.parentElement?e.parentElement.closest(`[${Ge.app.schema.reflexRootAttribute}]`):null}return t})(o);"string"==typeof l&&(l=[l]);const c=i.resolveLate||!1,u=(e=>{const t=e.attributes[Xe.app.schema.reflexDatasetAttribute],n=e.attributes[Xe.app.schema.reflexDatasetAllAttribute],r=t&&t.value.split(" ")||[],o=n&&n.value.split(" ")||[],i=Ve(e,r),s=Ve(e,o),a=i.reduce((e,t)=>({...ze(t),...e}),{}),l={dataset:{...ze(e),...a},datasetAll:{}};return s.forEach(e=>{const t=ze(e);Object.keys(t).forEach(e=>{const n=t[e];l.datasetAll[e]&&Array.isArray(l.datasetAll[e])?l.datasetAll[e].push(n):l.datasetAll[e]=[n]})}),l})(o),d=_e(r),f=_e(o),p={target:n,args:t,url:e,tabId:Qe,attrs:s,dataset:u,selectors:l,reflexId:a,resolveLate:c,xpathController:d,xpathElement:f,reflexController:this.identifier,permanentAttributeName:Ge.app.schema.reflexPermanentAttribute},{subscription:h}=this.StimulusReflex;if(!this.isActionCableConnectionOpen())throw"The ActionCable connection is not open! `this.isActionCableConnectionOpen()` must return true before calling `this.stimulate()`";if(!Me.subscriptionActive)throw"The ActionCable channel subscription for StimulusReflex was rejected.";r.reflexController=r.reflexController||{},r.reflexData=r.reflexData||{},r.reflexError=r.reflexError||{},r.reflexController[a]=this,r.reflexData[a]=p,Ne("before",o,r,a),setTimeout(()=>{const{params:e}=r.reflexData[a]||{},t=o.attributes[Ge.app.schema.reflexSerializeFormAttribute];t&&(i.serializeForm=!1,"true"===t.value&&(i.serializeForm=!0));const n=o.closest("form");De.enabled&&void 0===i.serializeForm&&n&&console.warn(`Deprecation warning: the next version of StimulusReflex will not serialize forms by default.\nPlease set ${Ge.app.schema.reflexSerializeFormAttribute}="true" on your Reflex Controller Element or pass { serializeForm: true } as an option to stimulate.`);const s=!1===i.serializeForm?"":((e,t={})=>{if(!e)return"";const n=t.w||window,{element:r}=t,o=new n.FormData(e),i=Array.from(o,e=>e.map(encodeURIComponent).join("=")),s=e.querySelector("input[type=submit]");return r&&r.name&&"INPUT"===r.nodeName&&"submit"===r.type?i.push(`${encodeURIComponent(r.name)}=${encodeURIComponent(r.value)}`):s&&s.name&&i.push(`${encodeURIComponent(s.name)}=${encodeURIComponent(s.value)}`),Array.from(new Set(i)).join("&")})(n,{element:o});r.reflexData[a]={...p,params:e,formData:s},h.send(r.reflexData[a])});const m=Ye(p);return Ee.enabled&&We.request(a,n,t,this.context.scope.identifier,o,r),m},__perform(e){let t,n=e.target;for(;n&&!t;)t=n.getAttribute(Ge.app.schema.reflexAttribute),t&&t.trim().length||(n=n.parentElement);const r=$e(t).find(t=>t.split("->")[0]===e.type);r&&(e.preventDefault(),e.stopPropagation(),this.stimulate(r.split("->")[1],n))}},tt=e=>{const{stimulusReflex:t}=e.detail||{};if(!t)return;const{reflexId:n,xpathElement:r,xpathController:o}=t,i=Ce(o),s=Ce(r),a=Xe[n],l=a.promise,c=e.detail.payload;a.pendingOperations--,a.pendingOperations>0||(t.resolveLate||setTimeout(()=>l.resolve({element:s,event:e,data:l.data,payload:c})),setTimeout(()=>Ne("success",s,i,n,c)))},nt=e=>{const{stimulusReflex:t}=e.detail||{};if(!t)return;const{reflexId:n,xpathElement:r,xpathController:o}=t,i=Ce(o),s=Ce(r),a=Xe[n],l=a.promise,c=e.detail.payload;a.completedOperations++,Ee.enabled&&We.success(e),a.completedOperations<a.totalOperations||(t.resolveLate&&setTimeout(()=>l.resolve({element:s,event:e,data:l.data,payload:c})),setTimeout(()=>Ne("finalize",s,i,n,c)),ve.perform(a.piggybackOperations))};class rt extends M{constructor(...e){super(...e),ot(this)}}const ot=(e,t={})=>{e.StimulusReflex={...t,channel:"StimulusReflex::Channel"},Me.createSubscription(e),Object.assign(e,et)};document.addEventListener("stimulus-reflex:server-message",e=>{const{reflexId:t,serverMessage:n,xpathController:r,xpathElement:o}=e.detail.stimulusReflex||{},{subject:i,body:s}=n,a=Ce(r),l=Ce(o),c=Xe[t],u=c.promise,d=e.detail.payload;a&&(a.reflexError=a.reflexError||{},"error"===i&&(a.reflexError[t]=s)),u["error"===i?"reject":"resolve"]({data:u.data,element:l,event:e,toString:()=>s,payload:d}),c.finalStage="halted"===i?"halted":"after",Ee.enabled&&We["error"===i?"error":"success"](e),{error:!0,halted:!0,nothing:!0,success:!0}[i]&&Ne(i,l,a,t,d),ve.perform(c.piggybackOperations)}),document.addEventListener("cable-ready:before-inner-html",tt),document.addEventListener("cable-ready:before-morph",tt),document.addEventListener("cable-ready:after-inner-html",nt),document.addEventListener("cable-ready:after-morph",nt),window.addEventListener("load",Ze);var it={initialize:(e,{controller:t=rt,consumer:n,debug:r,params:o,isolate:i,deprecate:s}={})=>{Me.set(n,o),setTimeout(()=>{De.enabled&&n&&console.warn("Deprecation warning: the next version of StimulusReflex will obtain a reference to consumer via the Stimulus application object.\nPlease add 'application.consumer = consumer' to your index.js after your Stimulus application has been established, and remove the consumer key from your StimulusReflex initialize() options object.")}),He.set(!!i),setTimeout(()=>{De.enabled&&He.disabled&&console.warn("Deprecation warning: the next version of StimulusReflex will standardize isolation mode, and the isolate option will be removed.\nPlease update your applications to assume that every tab will be isolated.")}),Xe.app=e,Xe.app.schema={...B,...e.schema},Xe.app.register("stimulus-reflex",t||rt),Ee.set(!!r),void 0!==s&&De.set(s),new MutationObserver(Ze).observe(document.documentElement,{attributeFilter:[Xe.app.schema.reflexAttribute,Xe.app.schema.actionAttribute],childList:!0,subtree:!0})},register:ot,useReflex:(e,t={})=>{ot(e,t)},get debug(){return Ee.value},set debug(e){Ee.set(!!e)},get deprecate(){return De.value},set deprecate(e){De.set(!!e)}},st=function(e,t){return(st=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function at(e,t){function n(){this.constructor=e}st(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function lt(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function ct(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(lt(arguments[t]));return e}var ut=function(e,t){this.target=t,this.type=e},dt=function(e){function t(t,n){var r=e.call(this,"error",n)||this;return r.message=t.message,r.error=t,r}return at(t,e),t}(ut),ft=function(e){function t(t,n,r){void 0===t&&(t=1e3),void 0===n&&(n="");var o=e.call(this,"close",r)||this;return o.wasClean=!0,o.code=t,o.reason=n,o}return at(t,e),t}(ut),pt=function(){if("undefined"!=typeof WebSocket)return WebSocket},ht={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+4e3*Math.random(),minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},mt=function(){function e(e,t,n){var r=this;void 0===n&&(n={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(e){r._debug("open event");var t=r._options.minUptime,n=void 0===t?ht.minUptime:t;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout((function(){return r._acceptOpen()}),n),r._ws.binaryType=r._binaryType,r._messageQueue.forEach((function(e){return r._ws.send(e)})),r._messageQueue=[],r.onopen&&r.onopen(e),r._listeners.open.forEach((function(t){return r._callEventListener(e,t)}))},this._handleMessage=function(e){r._debug("message event"),r.onmessage&&r.onmessage(e),r._listeners.message.forEach((function(t){return r._callEventListener(e,t)}))},this._handleError=function(e){r._debug("error event",e.message),r._disconnect(void 0,"TIMEOUT"===e.message?"timeout":void 0),r.onerror&&r.onerror(e),r._debug("exec error listeners"),r._listeners.error.forEach((function(t){return r._callEventListener(e,t)})),r._connect()},this._handleClose=function(e){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(e),r._listeners.close.forEach((function(t){return r._callEventListener(e,t)}))},this._url=e,this._protocols=t,this._options=n,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(e,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CONNECTING",{get:function(){return e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OPEN",{get:function(){return e.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSING",{get:function(){return e.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSED",{get:function(){return e.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferedAmount",{get:function(){return this._messageQueue.reduce((function(e,t){return"string"==typeof t?e+=t.length:t instanceof Blob?e+=t.size:e+=t.byteLength,e}),0)+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?e.CLOSED:e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),e.prototype.close=function(e,t){void 0===e&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),this._ws?this._ws.readyState!==this.CLOSED?this._ws.close(e,t):this._debug("close: already closed"):this._debug("close enqueued: no ws instance")},e.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,this._ws&&this._ws.readyState!==this.CLOSED?(this._disconnect(e,t),this._connect()):this._connect()},e.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,n=void 0===t?ht.maxEnqueuedMessages:t;this._messageQueue.length<n&&(this._debug("enqueue",e),this._messageQueue.push(e))}},e.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},e.prototype.dispatchEvent=function(e){var t,n,r=this._listeners[e.type];if(r)try{for(var o=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(r),i=o.next();!i.done;i=o.next()){var s=i.value;this._callEventListener(e,s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!0},e.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter((function(e){return e!==t})))},e.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,ct(["RWS>"],e))},e.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,n=void 0===t?ht.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,o=void 0===r?ht.minReconnectionDelay:r,i=e.maxReconnectionDelay,s=void 0===i?ht.maxReconnectionDelay:i,a=0;return this._retryCount>0&&(a=o*Math.pow(n,this._retryCount-1))>s&&(a=s),this._debug("next delay",a),a},e.prototype._wait=function(){var e=this;return new Promise((function(t){setTimeout(t,e._getNextDelay())}))},e.prototype._getNextUrl=function(e){if("string"==typeof e)return Promise.resolve(e);if("function"==typeof e){var t=e();if("string"==typeof t)return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},e.prototype._connect=function(){var e=this;if(!this._connectLock&&this._shouldReconnect){this._connectLock=!0;var t=this._options,n=t.maxRetries,r=void 0===n?ht.maxRetries:n,o=t.connectionTimeout,i=void 0===o?ht.connectionTimeout:o,s=t.WebSocket,a=void 0===s?pt():s;if(this._retryCount>=r)this._debug("max retries reached",this._retryCount,">=",r);else{if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),void 0===(l=a)||!l||2!==l.CLOSING)throw Error("No valid WebSocket class provided");var l;this._wait().then((function(){return e._getNextUrl(e._url)})).then((function(t){e._closeCalled||(e._debug("connect",{url:t,protocols:e._protocols}),e._ws=e._protocols?new a(t,e._protocols):new a(t),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout((function(){return e._handleTimeout()}),i))}))}}},e.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new dt(Error("TIMEOUT"),this))},e.prototype._disconnect=function(e,t){if(void 0===e&&(e=1e3),this._clearTimeouts(),this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new ft(e,t,this))}catch(e){}}},e.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},e.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},e.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},e.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},e.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},e}();class yt{constructor(e,t={},n){this.consumer=e,this.identifier=JSON.stringify(t),function(e,t){if(null!=t)for(let n in t){const r=t[n];e[n]=r}}(this,n)}send(e){return this.consumer.send(e,this.identifier)}unsubscribe(){return this.consumer.subscriptions.remove(this)}}class bt{constructor(e){this.consumer=e,this.subscriptions=[]}findAll(e){return this.subscriptions.filter(t=>t.identifier===e)}add(e){return this.subscriptions.push(e),this.consumer.connection.send(JSON.stringify({type:"subscribe",channelName:e.identifier})),e}create(e,t){const n="object"==typeof e?e:{channel:e},r=new yt(this.consumer,n,t);return this.add(r)}forget(e){return this.subscriptions=this.subscriptions.filter(t=>t!==e),e}remove(e){return this.forget(e),0==this.findAll(e.identifier).length&&this.consumer.connection.send(JSON.stringify({type:"unsubscribe",channelName:e.identifier})),e}notify(e,t,...n){let r;return r="string"==typeof e?this.findAll(e):[e],r.map(e=>"function"==typeof e[t]?e[t](...n):void 0)}notifyAll(e,...t){return this.subscriptions.map(n=>this.notify(n,e,...t))}}let gt;class vt extends M{constructor(...e){super(...e),xt(this)}}const xt=(e,t={})=>{e.StimulusReflex={...t,channel:"StimulusReflex::Channel"},(e=>{let t=gt||e.application.consumer;const{channel:n}=e.StimulusReflex,r={channel:n,...void 0},o=JSON.stringify(r);e.StimulusReflex.subscription=t.subscriptions.findAll(o)[0]||t.subscriptions.create(r,{received:Je,connected:Me.connected,rejected:Me.rejected,disconnected:Me.disconnected})})(e),Object.assign(e,et)},Et={initialize:(e,{controller:t=vt,consumer:n,debug:r,params:o,isolate:i,deprecate:s}={})=>{let a={consumer:n,controller:t,debug:r,params:o,isolate:i,deprecate:s};gt=n,it.initialize(e,a)},register:xt,get debug(){return Ee.value},set debug(e){Ee.set(!!e)},get deprecate(){return De.value},set deprecate(e){De.set(!!e)}};var wt=class{constructor(e,t={}){this._url=e,this.subscriptions=new bt(this),t={maxRetries:3,...t},this.connection=new mt(e,[],t),this.connection.isOpen=function(){return this.readyState===mt.OPEN},document.addEventListener("beforeunload",()=>{this.disconnect()}),this.connection.addEventListener("open",e=>{var t=this;let n=function(){t.subscriptions.notifyAll("connected")};t.subscriptions.subscriptions.map(e=>e.identifier).join().includes("StimulusReflex::Channel")?n():setTimeout(n,200)}),this.connection.addEventListener("message",e=>{let t=JSON.parse(e.data);"cookie"!==t.meta_type?this.subscriptions.notify(t.identifier,"received",t):document.cookie=`${t.key}=${t.value||""}; max-age=${t.max_age}; path=/`})}get url(){return function(e){if("function"==typeof e&&(e=e()),e&&!/^wss?:/i.test(e)){const t=document.createElement("a");return t.href=e,t.href=t.href,t.protocol=t.protocol.replace("http","ws"),t.href}return e}(this._url)}send(e,t){return e.identifier=t,this.connection.send(JSON.stringify(e))}connect(){return this.connection.open()}disconnect(){return this.connection.close()}};const Ot=k.start(),At=new wt(`${"https:"==location.protocol?"wss":"ws"}://${window.location.host}/ws/sockpuppet-sync`,{debug:!1});Et.initialize(Ot,{consumer:At})}]);
//# sourceMappingURL=/static/sockpuppet/sockpuppet.js.map